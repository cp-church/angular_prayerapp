@import 'tailwindcss';

@source './**/*.{html,ts}';

@custom-variant dark (&:is(.dark *));

@theme {
  --color-church-green-dark: #004b3d;
  --color-church-green-medium: #2f5f54;
  --color-church-green: #39704d;
  --color-church-gray-warm: #988f83;
  --color-church-cream: #e8e5e1;
  --color-church-blue: #0047ab;
  --color-church-blue-dark: #3e5266;
  --color-church-navy: #1f2937;
  --color-church-gold-dark: #b8860b;
  --color-church-gold: #c9a961;
  --color-church-gold-light: #f4c542;
  --color-church-slate: #2b2b2b;

  --color-primary-50: #f0f4f3;
  --color-primary-100: #e8e5e1;
  --color-primary-200: #d1ccc4;
  --color-primary-300: #988f83;
  --color-primary-400: #6b6256;
  --color-primary-500: #2f5f54;
  --color-primary-600: #39704d;
  --color-primary-700: #004b3d;
  --color-primary-800: #2b2b2b;
  --color-primary-900: #1f2937;

  --color-accent-50: #fef9e7;
  --color-accent-100: #fdf4d3;
  --color-accent-200: #f4c542;
  --color-accent-300: #c9a961;
  --color-accent-400: #b8860b;
  --color-accent-500: #0047ab;
  --color-accent-600: #3e5266;
  --color-accent-700: #004b3d;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility bg-gray-50 {
  /* Background colors - light theme */
  @apply bg-[#F8F7F5]!;

  /* Background colors - dark theme */
  .dark & {
    @apply bg-[#2B2B2B]!;
  }
}
@utility bg-gray-100 {
  @apply bg-[#E8E5E1]!;
  .dark & {
    @apply bg-[#3E5266]!;
  }
}
@utility bg-gray-200 {
  @apply bg-[#D1CCC4]!;
  .dark & {
    @apply bg-[#2F5F54]!;
  }
}
@utility bg-gray-300 {
  @apply bg-[#988F83]!;
  .dark & {
    @apply bg-[#3E5266]!;
  }
}
@utility bg-gray-700 {
  @apply bg-[#6B6256]!;
  .dark & {
    @apply bg-[#3E5266]!;
  }
}
@utility bg-gray-800 {
  @apply bg-white!;
  .dark & {
    @apply bg-[#1F2937]!;
  }
}
@utility bg-gray-900 {
  @apply bg-[#F8F7F5]!;
  .dark & {
    @apply bg-[#2B2B2B]!;
  }
}
@utility dark {
  /* Background colors - dark theme */
  & .bg-gray-50 {
    @apply bg-[#2B2B2B]!;
  }
  & .bg-gray-100 {
    @apply bg-[#3E5266]!;
  }
  & .bg-gray-200 {
    @apply bg-[#2F5F54]!;
  }
  & .bg-gray-300 {
    @apply bg-[#3E5266]!;
  }
  & .bg-gray-600 {
    @apply bg-[#2F5F54]!;
  }
  & .bg-gray-700 {
    @apply bg-[#3E5266]!;
  }
  & .bg-gray-800 {
    @apply bg-[#1F2937]!;
  }
  & .bg-gray-900 {
    @apply bg-[#2B2B2B]!;
  }

  /* Text colors - dark theme */
  & .text-gray-100 {
    @apply text-[#E8E5E1]!;
  }
  & .text-gray-200 {
    @apply text-[#D1CCC4]!;
  }
  & .text-gray-300 {
    @apply text-[#D1CCC4]!;
  }
  & .text-gray-400 {
    @apply text-[#988F83]!;
  }
  & .text-gray-500 {
    @apply text-[#988F83]!;
  }

  /* Border colors - dark theme */
  & .border-gray-600 {
    @apply border-[#3E5266]!;
  }
  & .border-gray-700 {
    @apply border-[#2F5F54]!;
  }
  & .border-gray-800 {
    @apply border-[#2B2B2B]!;
  }
  & .bg-green-600 {
    @apply bg-[#39704D]!;
  }
  & .bg-green-700 {
    @apply bg-[#004B3D]!;
  }
  & .hover\:bg-green-700:hover {
    @apply bg-[#004B3D]!;
  }
  & .bg-blue-600 {
    @apply bg-[#0047AB]!;
  }
  & .bg-blue-700 {
    @apply bg-[#3E5266]!;
  }
  & .hover\:bg-blue-700:hover {
    @apply bg-[#3E5266]!;
  }
}
@utility bg-gray-600 {
  .dark & {
    @apply bg-[#2F5F54]!;
  }
}
@utility text-gray-400 {
  /* Text colors - light theme */
  @apply text-[#988F83]!;
  .dark & {
    @apply text-[#988F83]!;
  }
}
@utility text-gray-500 {
  @apply text-[#988F83]!;
  .dark & {
    @apply text-[#988F83]!;
  }
}
@utility text-gray-600 {
  @apply text-[#6B6256]!;
}
@utility text-gray-700 {
  @apply text-[#2B2B2B]!;
}
@utility text-gray-800 {
  @apply text-[#2B2B2B]!;
}
@utility text-gray-900 {
  @apply text-[#2B2B2B]!;
}
@utility text-gray-100 {
  /* Text colors - dark theme */
  .dark & {
    @apply text-[#E8E5E1]!;
  }
}
@utility text-gray-200 {
  .dark & {
    @apply text-[#D1CCC4]!;
  }
}
@utility text-gray-300 {
  .dark & {
    @apply text-[#D1CCC4]!;
  }
}
@utility border-gray-100 {
  /* Border colors - light theme */
  @apply border-[#E8E5E1]!;
}
@utility border-gray-200 {
  @apply border-[#D1CCC4]!;
}
@utility border-gray-300 {
  @apply border-[#D1CCC4]!;
}
@utility border-gray-600 {
  /* Border colors - dark theme */
  .dark & {
    @apply border-[#3E5266]!;
  }
}
@utility border-gray-700 {
  .dark & {
    @apply border-[#2F5F54]!;
  }
}
@utility border-gray-800 {
  .dark & {
    @apply border-[#2B2B2B]!;
  }
}
@utility bg-green-600 {
  /* Update green to use church green */
  @apply bg-[#39704D]!;
  .dark & {
    @apply bg-[#39704D]!;
  }
}
@utility bg-green-700 {
  @apply bg-[#004B3D]!;
  .dark & {
    @apply bg-[#004B3D]!;
  }
}
@utility bg-blue-600 {
  /* Update blue to use church blue */
  @apply bg-[#0047AB]!;
  .dark & {
    @apply bg-[#0047AB]!;
  }
}
@utility bg-blue-700 {
  @apply bg-[#3E5266]!;
  .dark & {
    @apply bg-[#3E5266]!;
  }
}
@layer utilities {
  /* Hover overrides for church green/blue (cannot be @utility in v4) */
  .hover\:bg-green-700:hover {
    background-color: #004B3D !important;
  }
  .dark .hover\:bg-green-700:hover {
    background-color: #004B3D !important;
  }
  .hover\:bg-blue-700:hover {
    background-color: #3E5266 !important;
  }
  .dark .hover\:bg-blue-700:hover {
    background-color: #3E5266 !important;
  }
  /* Prevent layout shift when scrollbar appears/disappears */
  html {
    scrollbar-gutter: stable;
  }

  /* Church Theme Color Overrides - Maps Tailwind grays to church brand colors */
}

/* Church Theme Variables */
:root {
  --bg-primary: #FFFFFF;
  --bg-secondary: #F8F7F5;
  --bg-tertiary: #E8E5E1;
  --text-primary: #2B2B2B;
  --text-secondary: #6B6256;
  --text-muted: #988F83;
  --border-color: #D1CCC4;
  --accent-primary: #39704D;
  --accent-secondary: #C9A961;
  --accent-gold: #B8860B;
}

html.dark {
  --bg-primary: #1F2937;
  --bg-secondary: #2B2B2B;
  --bg-tertiary: #3E5266;
  --text-primary: #E8E5E1;
  --text-secondary: #D1CCC4;
  --text-muted: #988F83;
  --border-color: #3E5266;
  --accent-primary: #39704D;
  --accent-secondary: #C9A961;
  --accent-gold: #F4C542;
}

/* Font optimization */
html {
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  font-display: swap;
}

/* Base resets and global styles */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  line-height: 1.5;
}

/* Smooth transitions for theme changes */
html, body {
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* CDK Drag Drop Fixes for Wrapping Layouts */
/* Use global styles since drag preview is attached to body */

/* 1. Ensure drag preview (the item following cursor) is above everything */
.cdk-drag-preview {
  box-sizing: border-box;
  border-radius: 0.5rem;
  /* High contrast shadow for visibility */
  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),
              0 8px 10px 1px rgba(0, 0, 0, 0.14),
              0 3px 14px 2px rgba(0, 0, 0, 0.12);
  z-index: 10000 !important; /* Force on top of everything */
  pointer-events: none !important; /* Let clicks pass through */
}

/* 2. Drag Placeholder: Visible indicator of where item will drop */
.cdk-drag-placeholder {
  opacity: 0.3;
  border: 2px dashed rgba(0,0,0,0.2); /* Dotted border */
  border-radius: 0.5rem;
  background: rgba(0,0,0,0.05);
}

/* 3. Hide the original source element while dragging */
/* This prevents the "duplicate" visual artifact */
.cdk-drag-animating {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}

.cdk-drop-list-dragging .cdk-drag:not(.cdk-drag-placeholder) {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}

/* Fix iOS/Safari specific interaction issues */
.cdk-drag-handle {
  touch-action: none; /* Important for iOS to prevent scroll while dragging */
  -webkit-tap-highlight-color: transparent;
}

/* Safe area padding for notch/camera cutout - Capacitor only */
@supports (padding: env(safe-area-inset-top)) {
  html {
    /* Ensure document scroll works in native WebView (iOS/Android) */
    -webkit-overflow-scrolling: touch;
  }
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    /* Explicitly allow vertical touch scroll in native WebView */
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
  }
  /* Safe area strip uses same background as header (white / dark gray-800) */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top);
    background-color: #ffffff;
    z-index: 9999;
  }
  html.dark body::before {
    background-color: #1f2937;
  }
  /* Keep sticky header below the safe area (do not scroll into notch) */
  header.sticky {
    top: env(safe-area-inset-top);
  }
  /* Utility class for full-screen overlays/modals to respect safe area */
  .safe-area-overlay {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

@media print {
  @page {
    margin: 0.5in;
  }
  
  body {
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
  }
}
